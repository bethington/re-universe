# D2Docs Enhanced Environment Configuration Template
# Copy to .env and customize for your deployment

# ==============================================================================
# EXISTING CONFIGURATION (Preserved from current .env)
# ==============================================================================

# Ghidra Server Network Settings
GHIDRA_IP=10.0.10.30
GHIDRA_PORT=13100
GHIDRA_PORT_RANGE_START=13101
GHIDRA_PORT_RANGE_END=13102

# JVM Performance Settings
JVM_MAX_MEMORY=4g

# Authentication Settings
GHIDRA_USERS=benam

# ret-sync Relay Settings
RETSYNC_PORT=9100
RETSYNC_IP=10.0.10.30

# Repository and Data Paths
REPO_DATA_PATH=./repo-data
SYNC_LOGS_PATH=./sync-logs

# Backup Settings
BACKUP_RETENTION_DAYS=30
BACKUP_PATH=./backups
BACKUP_FREQUENCY=weekly
BACKUP_HOUR=03
BACKUP_MINUTE=00
BACKUP_WEEKDAY=Sunday

# BSim PostgreSQL Database Settings
BSIM_DB_NAME=bsim
BSIM_DB_USER=ben
BSIM_DB_PASSWORD=your-secure-password-here
BSIM_DB_PORT=5432
AUTO_CREATE_BSIM_SCHEMA=true

# Django Web Application Settings
GHIDRA_WEB_PORT=8000
DJANGO_SECRET_KEY=change-me-in-production-use-long-random-string
DJANGO_DEBUG=False
DJANGO_ALLOWED_HOSTS=localhost,127.0.0.1,d2docs.xebyte.com
DJANGO_USE_X_FORWARDED_HOST=True
DJANGO_USE_X_FORWARDED_PORT=True
DJANGO_SECURE_PROXY_SSL_HEADER=True
DJANGO_CSRF_TRUSTED_ORIGINS=https://d2docs.xebyte.com

# Traefik Integration
TRAEFIK_ENABLE=false
TRAEFIK_HOST=d2docs.xebyte.com
TRAEFIK_ENTRYPOINT=websecure
TRAEFIK_CERTRESOLVER=le
TRAEFIK_NETWORK=proxy

# ==============================================================================
# NEW: AI MODEL CONFIGURATION & API KEYS
# ==============================================================================

# Anthropic API Configuration
ANTHROPIC_API_KEY=sk-ant-your-api-key-here

# AI Model Orchestration
MODEL_COORDINATOR=claude-3-5-opus-4.6
MODEL_WORKERS=claude-3-5-sonnet,claude-3-haiku
MODEL_FALLBACK_ENABLED=true

# Cost Management
AI_DAILY_BUDGET=50.0
AI_WEEKLY_BUDGET=300.0
AI_MONTHLY_BUDGET=1200.0
AI_ALERT_THRESHOLD=0.8
AI_PROTECTION_THRESHOLD=1.0

# Model Distribution Targets (percentages)
AI_OPUS_TARGET_PERCENTAGE=20
AI_SONNET_TARGET_PERCENTAGE=30
AI_HAIKU_TARGET_PERCENTAGE=50

# AI Orchestration Service
AI_ORCHESTRATOR_PORT=8092
AI_ORCHESTRATOR_HOST=ai-orchestrator
AI_REQUEST_TIMEOUT=30
AI_MAX_RETRIES=3

# ==============================================================================
# NEW: VECTOR SEARCH & EMBEDDINGS
# ==============================================================================

# Vector Database Configuration (using existing PostgreSQL)
VECTOR_DIMENSION=1536
VECTOR_SIMILARITY_THRESHOLD=0.7
VECTOR_MAX_RESULTS=20

# Embedding Generation
EMBEDDING_MODEL=text-embedding-3-small
EMBEDDING_BATCH_SIZE=100
EMBEDDING_RATE_LIMIT=1000

# Vector Search Performance
VECTOR_CACHE_TTL=3600
VECTOR_QUERY_TIMEOUT=5
HNSW_M=16
HNSW_EF_CONSTRUCTION=200

# Vector Search Service
VECTOR_SEARCH_PORT=8090
VECTOR_SEARCH_HOST=vector-search

# ==============================================================================
# NEW: COMMUNITY MINING CONFIGURATION
# ==============================================================================

# GitHub API Configuration
GITHUB_API_TOKEN=ghp_your-github-token-here
GITHUB_RATE_LIMIT_BUFFER=100
GITHUB_MAX_REPOS_PER_QUERY=100
GITHUB_SCAN_INTERVAL=21600  # 6 hours in seconds

# Community Mining Settings
MINING_ENABLED=true
MINING_TRUST_THRESHOLD=0.6
MINING_QUALITY_THRESHOLD=0.7
MINING_MAX_SOURCES_PER_CYCLE=50

# Security and Compliance
MINING_SECURITY_SCAN_ENABLED=true
MINING_RESPECT_ROBOTS_TXT=true
MINING_RATE_LIMIT_ENABLED=true
MINING_MIN_REQUEST_DELAY=2.0

# Web Content Scanning
WEB_SCANNING_ENABLED=false
WEB_SCANNING_RATE_LIMIT=5.0
WEB_SCANNING_USER_AGENT=D2Docs-Bot/1.0

# Community Mining Service
COMMUNITY_MINER_PORT=8094
COMMUNITY_MINER_HOST=community-miner

# ==============================================================================
# NEW: CHAT INTERFACE CONFIGURATION
# ==============================================================================

# Chat Feature Flags
CHAT_ENABLED=true
CHAT_CONTEXT_AWARENESS=true
CHAT_CONVERSATION_HISTORY=true
CHAT_SUGGESTIONS_ENABLED=true

# Chat Performance Settings
CHAT_RESPONSE_TIMEOUT=30
CHAT_MAX_HISTORY_LENGTH=50
CHAT_SUGGESTION_COUNT=8
CHAT_CACHE_RESPONSES=true

# Chat Rate Limiting
CHAT_RATE_LIMIT_PER_MINUTE=10
CHAT_RATE_LIMIT_PER_HOUR=100
CHAT_RATE_LIMIT_PER_DAY=500

# Chat Interface Integration
CHAT_FLOATING_BUTTON=true
CHAT_KNOWLEDGE_EXPLORER=true
CHAT_CONTEXTUAL_SUGGESTIONS=true

# ==============================================================================
# NEW: LIVE ANALYSIS CONFIGURATION
# ==============================================================================

# Windows Container Settings
LIVE_ANALYSIS_ENABLED=false
LIVE_ANALYSIS_CONTAINER_MEMORY=4g
LIVE_ANALYSIS_TIMEOUT=300

# Detours Hook Configuration
DETOURS_HOOK_TIMEOUT=30
DETOURS_MAX_FUNCTIONS=10
DETOURS_TRACE_DEPTH=5

# D2 Binary Configuration
D2_BINARY_PATH=/data/binaries
D2_DEFAULT_VERSION=1.14d
D2_WINE_PREFIX=/opt/wine

# Live Analysis Service
LIVE_ANALYZER_PORT=8091
LIVE_ANALYZER_HOST=live-analyzer

# ==============================================================================
# NEW: MONITORING & PERFORMANCE
# ==============================================================================

# Health Check Configuration
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=5

# Performance Monitoring
PERFORMANCE_MONITORING_ENABLED=true
PERFORMANCE_BASELINE_ENABLED=true
PERFORMANCE_ALERT_THRESHOLD=2.0  # seconds

# Logging Configuration
LOG_LEVEL=INFO
LOG_FORMAT=structured
LOG_RETENTION_DAYS=30

# Metrics Collection
METRICS_ENABLED=true
METRICS_COLLECTION_INTERVAL=60
METRICS_RETENTION_DAYS=90

# Monitoring Dashboard
MONITORING_DASHBOARD_PORT=8095
MONITORING_DASHBOARD_HOST=monitoring-dashboard

# ==============================================================================
# NEW: ENHANCED CACHING CONFIGURATION
# ==============================================================================

# Redis Configuration (enhanced from existing redis-cache service)
REDIS_HOST=redis-cache
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_TIMEOUT=5

# Cache TTL Settings (seconds)
CACHE_FUNCTION_ANALYSIS=3600     # 1 hour
CACHE_SYSTEM_OVERVIEW=86400      # 24 hours
CACHE_COMMUNITY_KNOWLEDGE=1800   # 30 minutes
CACHE_CHAT_RESPONSES=1800        # 30 minutes
CACHE_VECTOR_SEARCH=7200         # 2 hours

# Advanced Caching
CACHE_COMPRESSION_ENABLED=true
CACHE_ENCRYPTION_ENABLED=false
CACHE_CLUSTERING_ENABLED=false

# ==============================================================================
# NEW: SECURITY CONFIGURATION
# ==============================================================================

# API Security
API_RATE_LIMITING=true
API_AUTH_REQUIRED=false
API_CORS_ENABLED=true
API_CORS_ORIGINS=https://d2docs.xebyte.com

# Content Security
CONTENT_SECURITY_SCANNING=true
CONTENT_MALWARE_DETECTION=true
CONTENT_LICENSE_CHECKING=true

# Data Protection
DATA_ENCRYPTION_AT_REST=false
DATA_ANONYMIZATION=true
DATA_RETENTION_POLICY=true

# Security Headers
SECURITY_HEADERS_ENABLED=true
CSP_ENABLED=true
HSTS_ENABLED=true

# ==============================================================================
# NEW: INTEGRATION CONFIGURATION
# ==============================================================================

# Integration Orchestrator
INTEGRATION_ORCHESTRATOR_PORT=8093
INTEGRATION_ORCHESTRATOR_HOST=integration-orchestrator

# MCP Integration
GHIDRA_MCP_HOST=ghidra-mcp
GHIDRA_MCP_PORT=8089
GHIDRA_MCP_TIMEOUT=30
MCP_MAX_RETRIES=3
MCP_RETRY_DELAY=1.0
MCP_BATCH_SIZE=20

# Cross-Service Communication
SERVICE_DISCOVERY_ENABLED=true
SERVICE_MESH_ENABLED=false
CIRCUIT_BREAKER_ENABLED=true

# ==============================================================================
# NEW: DEVELOPMENT & TESTING
# ==============================================================================

# Development Settings
DEVELOPMENT_MODE=false
DEBUG_SQL=false
DEBUG_COMMUNITY_MINING=false
DEBUG_AI_ORCHESTRATION=false

# Testing Configuration
RUN_TESTS_ON_STARTUP=false
TEST_DATA_GENERATION=false
LOAD_TEST_MODE=false

# Feature Flags
FEATURE_LIVE_ANALYSIS=false
FEATURE_ADVANCED_ANALYTICS=true
FEATURE_COMMUNITY_CONTRIBUTIONS=true
FEATURE_CROSS_VERSION_ANALYSIS=true

# ==============================================================================
# NEW: DEPLOYMENT & SCALING
# ==============================================================================

# Container Configuration
CONTAINER_MEMORY_LIMIT=2g
CONTAINER_CPU_LIMIT=1.0
CONTAINER_RESTART_POLICY=unless-stopped

# Service Ports (for docker-compose.yml)
GHIDRA_API_PORT=8081
GHIDRA_MCP_PORT=8089
GHIDRA_WEB_PORT=8083
REDIS_PORT=6379
VECTOR_SEARCH_PORT=8090
LIVE_ANALYZER_PORT=8091
AI_ORCHESTRATOR_PORT=8092
INTEGRATION_ORCHESTRATOR_PORT=8093
COMMUNITY_MINER_PORT=8094
MONITORING_DASHBOARD_PORT=8095

# ==============================================================================
# ENVIRONMENT-SPECIFIC CONFIGURATIONS
# ==============================================================================

# Development Environment
# DJANGO_DEBUG=True
# LOG_LEVEL=DEBUG
# DEVELOPMENT_MODE=True
# AI_DAILY_BUDGET=10.0

# Staging Environment
# DJANGO_DEBUG=False
# LOG_LEVEL=INFO
# BACKUP_ENABLED=True
# AI_DAILY_BUDGET=25.0

# Production Environment
# DJANGO_DEBUG=False
# LOG_LEVEL=WARNING
# BACKUP_ENABLED=True
# PERFORMANCE_MONITORING_ENABLED=True
# SECURITY_ENHANCED=True
# AI_DAILY_BUDGET=50.0

# ==============================================================================
# DOCUMENTATION REFERENCES
# ==============================================================================

# For detailed configuration documentation, see:
# - docs/architecture/DATABASE_SCHEMA_DESIGN.md
# - docs/architecture/AI_ORCHESTRATION_ARCHITECTURE.md
# - docs/architecture/COMMUNITY_MINING_SYSTEM.md
# - docs/architecture/CHAT_INTERFACE_DESIGN.md
# - docs/architecture/IMPLEMENTATION_ROADMAP.md

# For security considerations, see:
# - docs/PRODUCTION-SECURITY.md

# For troubleshooting, see:
# - docs/TROUBLESHOOTING.md