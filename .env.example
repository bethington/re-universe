# Example Environment Configuration for Ghidra RE Platform
# Copy this file to .env and modify as needed

# =============================================================================
# GHIDRA SERVER CONFIGURATION
# =============================================================================

# Ghidra Server Network Settings
GHIDRA_IP=localhost                    # Static IP for Ghidra server
GHIDRA_PORT=13100                      # Main Ghidra server port
GHIDRA_PORT_RANGE_START=13101          # Start of port range for client connections
GHIDRA_PORT_RANGE_END=13102            # End of port range for client connections

# JVM Performance Settings
JVM_MAX_MEMORY=4g                      # Maximum memory allocation (2g, 4g, 8g, 16g)

# Authentication Settings
GHIDRA_USERS=admin                     # Ghidra server username (password is always "changeme")

# =============================================================================
# RET-SYNC CONFIGURATION
# =============================================================================

# ret-sync Relay Settings
RETSYNC_PORT=9100                      # ret-sync communication port
RETSYNC_IP=localhost                   # Static IP for ret-sync relay

# =============================================================================
# STORAGE CONFIGURATION
# =============================================================================

# Repository and Data Paths
REPO_DATA_PATH=./repo-data             # Path to Ghidra repository data
SYNC_LOGS_PATH=./sync-logs             # Path to ret-sync logs

# =============================================================================
# BACKUP CONFIGURATION
# =============================================================================

# Backup Settings
BACKUP_RETENTION_DAYS=30               # How long to keep automated backups
BACKUP_PATH=./backups                  # Where to store backup files
BACKUP_FREQUENCY=weekly                # Options: hourly, daily, weekly, manual
BACKUP_HOUR=03                         # Hour for daily/weekly backups (24-hour format)
BACKUP_MINUTE=00                       # Minute for backups
BACKUP_WEEKDAY=Sunday                  # Day for weekly backups

# =============================================================================
# BSIM DATABASE CONFIGURATION
# =============================================================================

# BSim PostgreSQL Database Settings
BSIM_DB_NAME=bsim                      # BSim database name
BSIM_DB_USER=bsim_user                 # BSim database username
BSIM_DB_PASSWORD=CHANGE_ME_SECURE_PWD  # BSim database password (REQUIRED: change before first run!)
BSIM_DB_PORT=5432                      # BSim database port

# BSim Schema Auto-Creation (New Feature)
AUTO_CREATE_BSIM_SCHEMA=true           # Auto-create BSim schema on first container startup
                                       # Options: true (auto-create), false (manual setup)
                                       # Default: true (recommended for quick start)
                                       # Set to false if using custom schema or manual setup

# =============================================================================
# WEB APPLICATION CONFIGURATION
# =============================================================================

# Django Web Application Settings
GHIDRA_WEB_PORT=8000                   # Web application port
DJANGO_SECRET_KEY=CHANGE_ME_RANDOM_KEY # Django secret key (REQUIRED: generate a secure random key!)
DJANGO_DEBUG=False                     # Enable debug mode (True for development, False for production)
DJANGO_ALLOWED_HOSTS=localhost,127.0.0.1,10.0.0.30  # Comma-separated list of allowed hostnames
                                       # Add your server's LAN IP here (e.g., 10.0.0.30, 192.168.1.100)
                                       # For subdomains: ghidra.example.com
                                       # Use '*' to allow all hosts (development only, NOT for production)

# Reverse Proxy Settings (for nginx, Traefik, Caddy, etc.)
DJANGO_USE_X_FORWARDED_HOST=False      # Set to True if behind reverse proxy
DJANGO_USE_X_FORWARDED_PORT=False      # Set to True if proxy changes ports
DJANGO_SECURE_PROXY_SSL_HEADER=False   # Set to True if proxy terminates SSL/HTTPS
DJANGO_CSRF_TRUSTED_ORIGINS=           # REQUIRED for POST requests behind proxy (Django 4.0+)
                                       # Example: https://ghidra.example.com,https://re.example.com
                                       # Must include full URL with https:// prefix

# =============================================================================
# TRAEFIK CONFIGURATION (Optional)
# =============================================================================

# Traefik Integration - Set TRAEFIK_ENABLE=true to expose via Traefik
TRAEFIK_ENABLE=false                   # Enable Traefik routing
TRAEFIK_HOST=ghidra.example.com        # Your subdomain for the web interface
TRAEFIK_ENTRYPOINT=websecure           # Traefik entrypoint (websecure for HTTPS)
TRAEFIK_CERTRESOLVER=letsencrypt       # Your Traefik certificate resolver name
TRAEFIK_NETWORK=traefik                # External Docker network Traefik uses